<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="MemberDAO">

	<resultMap id="memberResult" type="memberVO">
		<result property="memberCode" column="MEMBER_CODE" />
	    <result property="memberId" column="MEMBER_ID"/>
	    <result property="password" column="MEMBER_PASSWORD"/>
	    <result property="name" column="MEMBER_NAME"/>
	    <result property="phoneNum" column="MEMBER_PHONENUMBER"/>
	    <result property="postNum" column="MEMBER_ZIPCODE"/>
	    <result property="address1" column="MEMBER_ADDRESS"/>
	    <result property="address2" column="MEMBER_DETAILADDRESS"/>
	    <result property="userImage" column="MEMBER_IMAGE"/>
	</resultMap>

	<!-- 회원가입 정보 입력-->
	<insert id="signUp">
		<![CDATA[
		INSERT INTO MEMBER VALUES(MEMBER_SEQ.NEXTVAL, #{memberId}, #{password}, #{name}, #{phoneNum}, #{postNum}, #{address1}, #{address2}, #{userImage})
		]]>
	</insert>
	
	<select id="checkDuplicate" resultMap="memberResult">
		<![CDATA[
			SELECT * FROM MEMBER WHERE MEMBER_ID = #{memberId}
		]]>
	</select>
	
	<!-- 회원 정보 수정 -->
	<update id="updateMember">
		<![CDATA[
			UPDATE MEMBER
			SET	MEMBER_PASSWORD = #{password}
			  , MEMBER_NAME = #{name}
		      , MEMBER_PHONENUMBER = #{phoneNum}
			  , MEMBER_ZIPCODE   = #{postNum}
			  , MEMBER_ADDRESS   = #{address1}
			  , MEMBER_DETAILADDRESS  = #{address2}
			  , MEMBER_IMAGE  = #{userImage}
			WHERE MEMBER_CODE = #{memberCode}
		]]>
	</update>
	
	<!-- 로그인 -->
	<select id="login" resultMap="memberResult">
        SELECT *
          FROM MEMBER
         WHERE MEMBER_ID = #{memberId}
           AND MEMBER_PASSWORD = #{password}
    </select>
	
	<!-- 회원 탈퇴(삭제) -->
	<delete id="deleteMember">
		<![CDATA[
			DELETE FROM MEMBER WHERE MEMBER_CODE = #{memberCode}
		]]>
	</delete>
	
	<select id="memberList" resultMap="memberResult">
		SELECT * FROM MEMBER
	</select>
</mapper>
